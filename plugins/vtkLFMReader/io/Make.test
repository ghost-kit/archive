# -*- mode: makefile -*-
include ../../../env/Make.${MACHINE}

CXXTEST=../../test/cxxtest/cxxtestgen.pl --error-printer
CXXFLAGS=-I../../test/cxxtest -I.
LIBS=-L${HDF}/lib -lmfhdf -ldf -ljpeg -lz

.SUFFIXES: .cxxTest .o .c .cxx .C 

.cxxTest.cxx:
	${CXXTEST} -o $(*F).cxx $<

.cxx.o:
	$(CXX) -c  $(CXXFLAGS) $<


all: testNoppNompi

testNoppNompi: CXXFLAGS+=-DNOMPI -DNOPP
testNoppNompi: testNoppNompi.cxx testNoppNompi.o
	${MAKE} libIoNoppNompi.a
	${CXX} ${CXXFLAGS} -o testNoppNompi testNoppNompi.o ${LIBS} -L. -lIoNoppNompi ${LIBS}

clean:
	rm -f *.cxx testNoppNompi